<section class="container">
  <h1>{{ 'general.search' | t }}</h1>

  <form action="{{ routes.search_url }}" method="get" role="search">
    <input
      type="search"
      name="q"
      value="{{ search.terms | escape }}"
      placeholder="{{ 'sections.header.search_placeholder' | t }}"
      aria-label="{{ 'general.search.search' | t }}"
    >
    <input type="hidden" name="type" value="product,collection,page,article">
    <button class="btn" type="submit">{{ 'general.search.search' | t }}</button>
  </form>

  {% if search.performed %}
    <div class="grid" style="margin-top:1rem">
      {% for item in search.results %}
        {% case item.object_type %}
          {% when 'product' %}
            {%- render 'product-card', product: item -%}

          {% when 'collection' %}
            <a class="product-card" href="{{ item.url }}">
              {% if item.image %}
                <img src="{{ item.image | img_url: '400x' }}" alt="{{ item.title | escape }}">
              {% endif %}
              <div class="title">{{ item.title }}</div>
              <div class="price">{{ 'collections.general.collection' | t }}</div>
            </a>

          {% when 'article' %}
            <a class="product-card" href="{{ item.url }}">
              {% if item.image %}
                <img src="{{ item.image | img_url: '400x' }}" alt="{{ item.title | escape }}">
              {% endif %}
              <div class="title">{{ item.title }}</div>
              <p class="excerpt">{{ item.excerpt | strip_html | truncate: 90 }}</p>
            </a>

          {% when 'page' %}
            <a class="product-card" href="{{ item.url }}">
              <div class="title">{{ item.title }}</div>
              <p class="excerpt">{{ item.content | strip_html | truncate: 90 }}</p>
            </a>

          {% else %}
            <a class="product-card" href="{{ item.url }}">
              {% if item.featured_image %}
                <img src="{{ item.featured_image | img_url: '400x' }}" alt="{{ item.title | escape }}">
              {% endif %}
              <div class="title">{{ item.title }}</div>
            </a>
        {% endcase %}
      {% else %}
        <p>No results.</p>
      {% endfor %}
    </div>

    {%- paginate search.results by 24 -%}{%- endpaginate -%}
  {% endif %}
</section>

{% schema %}
{
  "name": "Main search",
  "settings": []
}
{% endschema %}
