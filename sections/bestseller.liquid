{% comment %}
  Section: Best Sellers (BEM classes)
{% endcomment %}
<section class="bestsellers layout__grid-box">
  <div class="bestsellers__container">
    <div class="bestsellers__header">
      {% if section.settings.eyebrow != blank %}
        <div class="bestsellers__eyebrow">{{ section.settings.eyebrow }}</div>
      {% endif %}
      {% if section.settings.heading != blank %}
        <h2 class="bestsellers__title">{{ section.settings.heading }}</h2>
      {% endif %}
    </div>
    <div class="bestsellers__scroller">
      <div class="bestsellers__list owl-carousel" id="bestsellers-{{ section.id }}">
        {% if section.settings.source == 'collection' and section.settings.collection != blank %}
          {% for product in section.settings.collection.products limit: section.settings.product_limit %}
            {% render 'product-card', product: product %}
          {% endfor %}
        {% else %}
          {% for block in section.blocks %}
            {% assign product = block.settings.product %}
            {% if product %}
              {% render 'product-card', product: product, block: block %}
            {% endif %}
          {% endfor %}
        {% endif %}
      </div>

      <div class="bestsellers__nav"></div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Best sellers (carousel)",
  "settings": [
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow",
      "default": "Our Best Sellers"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "South India's mostâ€‘loved snacks!"
    },
    {
      "type": "radio",
      "id": "source",
      "label": "Product source",
      "default": "collection",
      "options": [
        { "value": "collection", "label": "From a collection" },
        { "value": "manual", "label": "Manually select products" }
      ]
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection",
      "info": "Used when source is set to collection"
    },
    {
      "type": "range",
      "id": "product_limit",
      "label": "Max products to show",
      "info": "Only applies when using collection source",
      "min": 2,
      "max": 12,
      "step": 1,
      "default": 8
    }
  ],
  "blocks": [
    {
      "type": "product",
      "name": "Product",
      "limit": 12,
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Product"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Best sellers (carousel)",
      "category": "Products"
    }
  ]
}
{% endschema %}
