{% comment %}
  snippets/header-mobile.liquid
  New mobile-only header
{% endcomment %}

<div class="header header--mobile" data-header-mobile>
  <div class="header--mobile__container">
    <nav class="header__nav">
      <button
        class="menu-icon mobile-only"
        type="button"
        aria-label="Shop"
        aria-controls="mobile-menu-panel"
        data-mobile-menu-button
      >
        <div class="menu-icon__line menu-icon__line--top"></div>
        <div class="menu-icon__line menu-icon__line--middle"></div>
        <div class="menu-icon__line menu-icon__line--bottom"></div>
      </button>
    </nav>

    <a class="header__logo" href="{{ routes.root_url }}" aria-label="{{ shop.name }}">
      {%- if section.settings.logo_svg != blank -%}
        {{ section.settings.logo_svg }}
      {%- elsif settings.logo -%}
        <img
          src="{{ settings.logo | image_url: width: 320 }}"
          width="{{ settings.logo.width }}"
          height="{{ settings.logo.height }}"
          alt="{{ shop.name }}"
          loading="eager"
        >
      {%- else -%}
        <span class="logo-text">{{ shop.name }}</span>
      {%- endif -%}
    </a>

    <nav class="header__nav header__nav--right" aria-label="Utilities">
      <button class="header__icon header__icon--cart" type="button" aria-label="Open cart" aria-controls="cart-drawer">
        {% render 'icon-cart' %}
        <span class="header__cart-badge" data-cart-count aria-label="0 items in cart">{{ cart.item_count }}</span>
      </button>
    </nav>
  </div>

  <div class="mobile-menu" id="mobile-menu-panel">
    <!-- Shop section in mobile -->
    {%- if section.settings.shop_menu != blank -%}
      <button
        class="mobile-menu__toggle"
        data-mobile-shop-toggle
        aria-expanded="false"
        type="button"
      >
        <span>{{ section.settings.shop_label | default: 'Shop' }}</span>
        <span class="mobile-menu__plus" aria-hidden="true">+</span>
      </button>

      <div class="mobile-menu__submenu" data-mobile-shop-menu hidden>
        {%- assign menu = section.settings.shop_menu | linklist -%}
        <ul>
          {%- for link in menu.links -%}
            <li>
              <a href="{{ link.url }}">{{ link.title }}</a>
            </li>
          {%- endfor -%}
        </ul>
      </div>
    {%- endif -%}

    <!-- Our Story in mobile -->
    {%- if section.settings.our_story_link != blank -%}
      <div class="mobile-menu__section">
        <a class="mobile-menu__link" href="{{ section.settings.our_story_link }}">
          {{ section.settings.our_story_label | default: 'Our story' }}
        </a>
      </div>
    {%- endif -%}
  </div>
</div>
